{% extends 'base.html' %}

{% block title %}Search Results{% endblock %}

{% block body %}

    <div class="container">

        <!-- Shows the result from search-->
        <div class="row d-flex justify-content-around" id="results-container">

            <!-- Loop over list of museum object -->
            {% for place in places_data %}
            <div class="col-12 col-md-6 col-lg-4 my-4">

                <!-- Check if the current museum has photo and make API request to ge the photo-->
                {% if 'photos' in place %}
                    <img class="muse-img img-fluid my-2" src="https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference={{place.photos[0].photo_reference}}&key={{key}}" alt="museum">
                {% else %}
                    <img class="muse-img img-fluid my-2" src="/static/img/muse.png" alt="museum">
                {% endif %}

                <!-- Display museum name, which is also a route to /muse-detail with the place_id as a key to retrieve museum details-->
                <div>
                    <a href="/muse-details?place_id={{place.place_id}}">{{place.name}}</a>
                </div>

                <!-- Check if the current museum has rating-->
                {% if 'rating' in place %}
                <div>Rating: {{place.rating}}</div>
                {% endif %}


            </div>
            {% endfor %}
        </div>
    </div>

    <!-- Button that loads next batch result -->
    <button id="load-more-btn" name="token" value="{{token}}">Load More Results</button>

    <!-- Load JS that will run when load result button is clicked -->
    <script src="/static/js/load_more_result.js"></script>

{% endblock %}
